# üê± ASTRACAT DNS Resolver

**ASTRACAT DNS Resolver** ‚Äî —ç—Ç–æ –±—ã—Å—Ç—Ä—ã–π –∏ –ª—ë–≥–∫–∏–π —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π DNS-—Ä–µ–∑–æ–ª–≤–µ—Ä, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ Go.  
–û–Ω –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ –≤—ã—Å–æ–∫—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ—Å—Ç–æ—Ç—É, —Å –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π –∏ –º–æ—â–Ω—ã–º –∫—ç—à–µ–º.  
–†–µ–∑–æ–ª–≤–µ—Ä —Å–∞–º –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–ª–Ω—É—é —Ä–µ–∫—É—Ä—Å–∏—é, –Ω–∞—á–∏–Ω–∞—è —Å –∫–æ—Ä–Ω–µ–≤—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤.
<img width="1980" height="1180" alt="cd118a5a-a7a2-402d-9159-960b177a241b" src="https://github.com/user-attachments/assets/9a05ce2e-16ae-4f55-9074-117002e3f09f" />

---

## ‚ú® –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- ‚ö° **–°–∫–æ—Ä–æ—Å—Ç—å** ‚Äî –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ –≤—ã—Å–æ–∫—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Å—Ä–∞–≤–Ω–∏–º—É—é —Å Cloudflare –∏ Google DNS.  
- üß† **–£–º–Ω—ã–π –∫—ç—à** ‚Äî –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π —Ö—ç—à-–∫—ç—à (L1/L2) —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π TTL, negative caching –∏ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è.  
- üîÅ **–ü–æ–ª–Ω–∞—è —Ä–µ–∫—É—Ä—Å–∏—è –∏ DNSSEC** ‚Äî —Ä–µ–∑–æ–ª–≤–µ—Ä —Ö–æ–¥–∏—Ç –∫ –∫–æ—Ä–Ω–µ–≤—ã–º —Å–µ—Ä–≤–µ—Ä–∞–º –∏ —Å–∞–º –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è, –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö —Ñ–æ—Ä–≤–∞—Ä–¥–µ—Ä–æ–≤.  
- üß© **–õ—ë–≥–∫–∞—è —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å** ‚Äî –ø—Ä–æ—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –ø–æ–¥ –∫–æ—Ç–æ—Ä—É—é –ª–µ–≥–∫–æ –ø–∏—Å–∞—Ç—å –ø–ª–∞–≥–∏–Ω—ã –∏ –Ω–æ–≤—ã–µ –º–æ–¥—É–ª–∏.  
- ü§´ **–ë–µ–∑ –ª–∏—à–Ω–∏—Ö –ª–æ–≥–æ–≤** ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∏—Ö–æ, –±–µ–∑ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ —Å–∏—Å—Ç–µ–º—ã –Ω–µ–Ω—É–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π.  
- üõ† **–ü—Ä–æ—Å—Ç–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞** ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ `git clone` + `./install.sh`, –∏ —Ä–µ–∑–æ–ª–≤–µ—Ä –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ.  
- üñ• **–†–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏** ‚Äî –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç **5053** –Ω–∞ `127.0.0.1`.  

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å **ASTRACAT DNS Resolver** –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ:  

```bash
# –°–∫–∞—á–∏–≤–∞–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/ASTRACAT2022/The-ASTRACAT-DNS-Resolver.git

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd The-ASTRACAT-DNS-Resolver

# –ó–∞–ø—É—Å–∫–∞–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫—É –∏ –ø–æ—Ç–æ–º –µ—â–µ —Ä–∞–∑ –ø–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü—ã–∏–∏ –∫–ª—é—á–µ–π 
./install.sh

---

## üìä Metrics

ASTRACAT DNS Resolver exposes a Prometheus metrics endpoint at `/metrics` on the address specified by `MetricsAddr` in your configuration (defaulting to port 9090).

### Available Metrics

| Metric Name                               | Description                                                                 |
| ----------------------------------------- | --------------------------------------------------------------------------- |
| `dns_resolver_qps`                        | Queries per second.                                                         |
| `dns_resolver_total_queries`              | Total number of DNS queries.                                                |
| `dns_resolver_cache_probation_size`       | Size of the probation segment of the cache.                                 |
| `dns_resolver_cache_protected_size`       | Size of the protected segment of the cache.                                 |
| `dns_resolver_cpu_usage_percent`          | Current CPU usage percentage.                                               |
| `dns_resolver_memory_usage_percent`       | Current memory usage percentage.                                            |
| `dns_resolver_goroutine_count`            | Current number of goroutines.                                               |
| `dns_resolver_network_sent_bytes`         | Total network bytes sent.                                                   |
| `dns_resolver_network_recv_bytes`         | Total network bytes received.                                               |
| `dns_resolver_top_nx_domains`             | Top domains with NXDOMAIN responses.                                        |
| `dns_resolver_top_latency_domains_ms`     | Top domains by average query latency in milliseconds.                       |
| `dns_resolver_query_types_total`          | Total number of queries by type.                                            |
| `dns_resolver_response_codes_total`       | Total number of responses by code.                                          |
| `dns_resolver_unbound_errors_total`       | Total number of errors from the Unbound resolver.                           |
| `dns_resolver_dnssec_validation_total`    | Total number of DNSSEC validation results by type (bogus, secure, insecure). |
| `dns_resolver_cache_revalidations_total`  | Total number of cache revalidations.                                        |
| `dns_resolver_cache_hits_total`           | Total number of cache hits.                                                 |
| `dns_resolver_cache_misses_total`         | Total number of cache misses.                                               |
| `dns_resolver_cache_evictions_total`      | Total number of cache evictions.                                            |
| `dns_resolver_lmdb_loads_total`           | Total number of items loaded from LMDB.                                     |
| `dns_resolver_lmdb_errors_total`          | Total number of LMDB errors.                                                |
| `dns_resolver_prefetches_total`           | Total number of cache prefetches.                                           |
